import{c as S,o as c,a as f,L as g,n as b,M as h,N as y,O as V,P as v,Q as x,x as $,R as P,u as B,f as A,j as r,d as a,v as C,A as L,B as R,_ as M,C as m,D as p,q as _,b as N,G as j,J as D,S as E}from"./index-791465fe.js";import{_ as U}from"./FormCheckRadio-adb21499.js";const q={__name:"SectionFullScreen",props:{bg:{type:String,required:!0,validator:o=>["purplePink","pinkRed"].includes(o)}},setup(o){const e=o,u=S(()=>{if(h().isEnabled)return y;switch(e.bg){case"purplePink":return v;case"pinkRed":return V}return""});return(i,n)=>(c(),f("div",{class:b(["flex min-h-screen items-center justify-center",u.value])},[g(i.$slots,"default",{cardClass:"w-11/12 md:w-7/12 lg:w-6/12 xl:w-4/12 shadow-2xl"})],2))}},G={},I={class:"bg-gray-50 dark:bg-slate-800 dark:text-slate-100"};function J(o,e){return c(),f("div",I,[g(o.$slots,"default")])}const O=x(G,[["render",J]]),z=N("h1",{class:"dark:bg-slate-800 w-full absolute top-0 left-0 text-2xl p-4"},"LogMan v.2.0",-1),H={__name:"LoginView",setup(o){const e=$({login:"",pass:"",remember:!0}),u=new E,i=P(),n=B(),w=async()=>{try{const s=await u.login(e.login,e.pass);if(s.success){let t={name:s.data.user.name,email:s.data.user.email,uid:s.data.user.id,grps:s.data.user.groups};n.userName=s.data.user.name,n.userEmail=s.data.user.email,n.userId=s.data.user.id,sessionStorage.setItem("u_obj",JSON.stringify(t)),(async()=>{await n.fetchSources(),await n.fetchConnnections(),i.push("sources")})()}}catch(s){console.log(s)}},k=()=>{w()};return(s,t)=>(c(),A(O,null,{default:r(()=>[a(q,{bg:"purplePink"},{default:r(({cardClass:d})=>[z,a(C,{class:b(d),"is-form":"",onSubmit:L(k,["prevent"])},{footer:r(()=>[a(R,null,{default:r(()=>[a(M,{type:"submit",color:"info",label:"Login"})]),_:1})]),default:r(()=>[a(m,{label:"Login",help:"Please enter your login"},{default:r(()=>[a(p,{modelValue:e.login,"onUpdate:modelValue":t[0]||(t[0]=l=>e.login=l),icon:_(j),name:"login",autocomplete:"username"},null,8,["modelValue","icon"])]),_:1}),a(m,{label:"Password",help:"Please enter your password"},{default:r(()=>[a(p,{modelValue:e.pass,"onUpdate:modelValue":t[1]||(t[1]=l=>e.pass=l),icon:_(D),type:"password",name:"password",autocomplete:"current-password"},null,8,["modelValue","icon"])]),_:1}),a(U,{modelValue:e.remember,"onUpdate:modelValue":t[2]||(t[2]=l=>e.remember=l),name:"remember",label:"Remember","input-value":!0},null,8,["modelValue"])]),_:2},1032,["class","onSubmit"])]),_:1})]),_:1}))}};export{H as default};
